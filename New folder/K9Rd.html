<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Primera API con JavaScript</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .container {
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        .user-card {
            background: rgba(255,255,255,0.2);
            padding: 20px;
            margin: 10px 0;
            border-radius: 10px;
            border-left: 5px solid #00ff88;
        }
        button {
            background: #00ff88;
            color: #333;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin: 10px 5px;
            transition: all 0.3s ease;
        }
        button:hover {
            background: #00cc6a;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,255,136,0.4);
        }
        #status {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-weight: bold;
        }
        .loading {
            background: rgba(255,193,7,0.2);
            border-left: 5px solid #ffc107;
        }
        .success {
            background: rgba(40,167,69,0.2);
            border-left: 5px solid #28a745;
        }
        .error {
            background: rgba(220,53,69,0.2);
            border-left: 5px solid #dc3545;
        }
        input {
            padding: 12px 15px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 25px;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 16px;
            margin: 10px;
        }
        input::placeholder {
            color: rgba(255,255,255,0.7);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üåê Mi Primera API con JavaScript ES6+</h1>
        
        <div id="status">Presiona un bot√≥n para comenzar</div>
        
        <div>
            <button onclick="cargarUsuario(1)">üë§ Cargar Usuario 1</button>
            <button onclick="cargarUsuario(2)">üë§ Cargar Usuario 2</button>
            <button onclick="cargarUsuario(3)">üë§ Cargar Usuario 3</button>
            <button onclick="cargarTodos()">üìã Cargar Todos</button>
            <button onclick="buscarUsuario()">üîç Buscar Usuario</button>
        </div>
        
        <input type="text" id="busqueda" placeholder="Buscar por nombre..." />
        
        <div id="resultados"></div>
    </div>

    <script>
        // Base de datos simulada (esto ser√° real con APIs en el futuro)
        const baseDatosUsuarios = [
            {
                id: 1,
                nombre: "Ana Garc√≠a",
                email: "ana.garcia@email.com",
                edad: 28,
                ciudad: "Madrid",
                profesion: "Desarrolladora Frontend",
                salario: 45000,
                tecnologias: ["JavaScript", "React", "Vue.js"],
                activo: true
            },
            {
                id: 2,
                nombre: "Carlos Rodr√≠guez",
                email: "carlos.rodriguez@email.com",
                edad: 32,
                ciudad: "Barcelona",
                profesion: "DevOps Engineer",
                salario: 52000,
                tecnologias: ["AWS", "Docker", "Kubernetes", "Python"],
                activo: true
            },
            {
                id: 3,
                nombre: "Mar√≠a L√≥pez",
                email: "maria.lopez@email.com",
                edad: 26,
                ciudad: "Valencia",
                profesion: "Full Stack Developer",
                salario: 48000,
                tecnologias: ["Node.js", "MongoDB", "React", "TypeScript"],
                activo: false
            },
            {
                id: 4,
                nombre: "Pedro Mart√≠n",
                email: "pedro.martin@email.com",
                edad: 29,
                ciudad: "Sevilla",
                profesion: "Backend Developer",
                salario: 43000,
                tecnologias: ["Python", "Django", "PostgreSQL"],
                activo: true
            }
        ];

        // Funci√≥n para mostrar status
        function mostrarStatus(mensaje, tipo) {
            const statusDiv = document.getElementById('status');
            statusDiv.textContent = mensaje;
            statusDiv.className = tipo;
        }

        // Funci√≥n para limpiar resultados
        function limpiarResultados() {
            document.getElementById('resultados').innerHTML = '';
        }

        // Funci√≥n para renderizar usuario
        function renderizarUsuario(usuario) {
            return `
                <div class="user-card">
                    <h3>üë§ ${usuario.nombre}</h3>
                    <p><strong>üìß Email:</strong> ${usuario.email}</p>
                    <p><strong>üéÇ Edad:</strong> ${usuario.edad} a√±os</p>
                    <p><strong>üìç Ciudad:</strong> ${usuario.ciudad}</p>
                    <p><strong>üíº Profesi√≥n:</strong> ${usuario.profesion}</p>
                    <p><strong>üí∞ Salario:</strong> ‚Ç¨${usuario.salario.toLocaleString()}</p>
                    <p><strong>üõ†Ô∏è Tecnolog√≠as:</strong> ${usuario.tecnologias.join(', ')}</p>
                    <p><strong>‚úÖ Estado:</strong> ${usuario.activo ? 'üü¢ Activo' : 'üî¥ Inactivo'}</p>
                </div>
            `;
        }

        // üéØ PR√ÅCTICA 1: Buscar usuario por ID (find)
        function cargarUsuario(id) {
            mostrarStatus(`üîÑ Buscando usuario ${id}...`, 'loading');
            limpiarResultados();
            
            // Simular delay de red (como API real)
            setTimeout(() => {
                try {
                    // Array method: find()
                    const usuario = baseDatosUsuarios.find(user => user.id === id);
                    
                    if (usuario) {
                        mostrarStatus(`‚úÖ Usuario ${id} cargado exitosamente`, 'success');
                        document.getElementById('resultados').innerHTML = 
                            `<h2>Resultado para ID ${id}:</h2>${renderizarUsuario(usuario)}`;
                    } else {
                        mostrarStatus(`‚ùå Usuario ${id} no encontrado`, 'error');
                        document.getElementById('resultados').innerHTML = 
                            `<h2>Resultado:</h2><p>No se encontr√≥ ning√∫n usuario con ID ${id}</p>`;
                    }
                    
                } catch (error) {
                    mostrarStatus(`‚ùå Error: ${error.message}`, 'error');
                    console.error('Error:', error);
                }
            }, 1000); // Simular 1 segundo de delay
        }

        // üéØ PR√ÅCTICA 2: Cargar todos (filter + map)
        function cargarTodos() {
            mostrarStatus('üîÑ Cargando todos los usuarios...', 'loading');
            limpiarResultados();
            
            setTimeout(() => {
                try {
                    // Array methods: filter() y map()
                    const usuariosActivos = baseDatosUsuarios.filter(user => user.activo);
                    const usuariosInactivos = baseDatosUsuarios.filter(user => !user.activo);
                    
                    mostrarStatus(`‚úÖ ${usuariosActivos.length} usuarios activos cargados`, 'success');
                    
                    let html = `
                        <h2>üë• Todos los Usuarios (${baseDatosUsuarios.length} total)</h2>
                        <div style="background: rgba(40,167,69,0.2); padding: 15px; border-radius: 10px; margin: 10px 0;">
                            <h3>üü¢ Usuarios Activos (${usuariosActivos.length}):</h3>
                            ${usuariosActivos.map(renderizarUsuario).join('')}
                        </div>
                        <div style="background: rgba(220,53,69,0.2); padding: 15px; border-radius: 10px; margin: 10px 0;">
                            <h3>üî¥ Usuarios Inactivos (${usuariosInactivos.length}):</h3>
                            ${usuariosInactivos.map(renderizarUsuario).join('')}
                        </div>
                    `;
                    
                    document.getElementById('resultados').innerHTML = html;
                    
                } catch (error) {
                    mostrarStatus(`‚ùå Error: ${error.message}`, 'error');
                }
            }, 1500);
        }

        // üéØ PR√ÅCTICA 3: Buscar por nombre (filter + includes)
        function buscarUsuario() {
            const termino = document.getElementById('busqueda').value.toLowerCase().trim();
            
            if (!termino) {
                mostrarStatus('‚ö†Ô∏è Escribe un nombre para buscar', 'error');
                return;
            }
            
            mostrarStatus(`üîç Buscando "${termino}"...`, 'loading');
            limpiarResultados();
            
            setTimeout(() => {
                try {
                    // Array method: filter() con includes()
                    const resultados = baseDatosUsuarios.filter(usuario => 
                        usuario.nombre.toLowerCase().includes(termino) ||
                        usuario.profesion.toLowerCase().includes(termino) ||
                        usuario.ciudad.toLowerCase().includes(termino)
                    );
                    
                    if (resultados.length > 0) {
                        mostrarStatus(`‚úÖ ${resultados.length} resultado(s) encontrado(s)`, 'success');
                        document.getElementById('resultados').innerHTML = 
                            `<h2>üîç Resultados para "${termino}":</h2>${resultados.map(renderizarUsuario).join('')}`;
                    } else {
                        mostrarStatus(`‚ùå No se encontraron resultados para "${termino}"`, 'error');
                        document.getElementById('resultados').innerHTML = 
                            `<h2>Resultados:</h2><p>No se encontraron usuarios que coincidan con "${termino}"</p>`;
                    }
                    
                } catch (error) {
                    mostrarStatus(`‚ùå Error: ${error.message}`, 'error');
                }
            }, 800);
        }

        // üéØ PR√ÅCTICA 4: Async/Await con m√∫ltiples APIs
        async function cargarDatosCompletos(usuarioId) {
            mostrarStatus(`üîÑ Cargando datos completos del usuario ${usuarioId}...`, 'loading');
            
            try {
                // Simular m√∫ltiples API calls
                const [usuario, estadisticas] = await Promise.all([
                    simularAPICall('usuario', usuarioId, 1000),
                    simularAPICall('estadisticas', usuarioId, 800)
                ]);
                
                const datosCompletos = {
                    ...usuario,
                    estadisticas: estadisticas,
                    fechaConsulta: new Date().toLocaleString()
                };
                
                mostrarStatus(`‚úÖ Datos completos cargados`, 'success');
                
                const html = `
                    <h2>üìä Datos Completos - ${usuario.nombre}</h2>
                    ${renderizarUsuario(usuario)}
                    <div style="background: rgba(0,123,255,0.2); padding: 15px; border-radius: 10px; margin: 10px 0;">
                        <h3>üìà Estad√≠sticas:</h3>
                        <p><strong>Proyectos completados:</strong> ${estadisticas.proyectos}</p>
                        <p><strong>A√±os de experiencia:</strong> ${estadisticas.experiencia}</p>
                        <p><strong>Rating promedio:</strong> ${estadisticas.rating}/5</p>
                    </div>
                    <p><strong>üïê Consulta realizada:</strong> ${datosCompletos.fechaConsulta}</p>
                `;
                
                document.getElementById('resultados').innerHTML = html;
                
            } catch (error) {
                mostrarStatus(`‚ùå Error cargando datos: ${error.message}`, 'error');
            }
        }

        // Funci√≥n helper para simular API calls
        function simularAPICall(tipo, id, delay) {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    if (tipo === 'usuario') {
                        const usuario = baseDatosUsuarios.find(user => user.id === id);
                        resolve(usuario);
                    } else if (tipo === 'estadisticas') {
                        // Simular estad√≠sticas
                        resolve({
                            proyectos: Math.floor(Math.random() * 50) + 10,
                            experiencia: Math.floor(Math.random() * 15) + 1,
                            rating: (Math.random() * 2 + 3).toFixed(1)
                        });
                    } else {
                        reject(new Error('Tipo de API no v√°lido'));
                    }
                }, delay);
            });
        }

        // Agregar eventos de teclado
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('busqueda').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    buscarUsuario();
                }
            });
        });

        // Demo autom√°tico al cargar
        window.onload = function() {
            console.log('üöÄ Mi Primera API JavaScript cargada');
            console.log('üìö Array methods usados: find(), filter(), map(), includes()');
            console.log('‚ö° Async/await implementado para llamadas m√∫ltiples');
            console.log('üéØ Listo para conectar con APIs reales!');
            
            // Cargar usuario 1 autom√°ticamente despu√©s de 2 segundos
            setTimeout(() => {
                cargarUsuario(1);
            }, 2000);
        };
    </script>
</body>
</html>
